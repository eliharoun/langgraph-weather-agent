graph TD
    Start([ğŸ‘¤ User Asks Question<br/>'What is the weather in Tokyo?']) -->|"â‘  User input"| StateInit[ğŸ“¦ State Initialized<br/>messages: list]
    
    StateInit -->|"â‘¡ Graph starts"| Agent[ğŸ¤– AGENT NODE<br/>call_agent function]
    
    Agent -->|"â‘¢ Invoke model"| GPT[ğŸ’­ GPT-4 Thinks<br/>Should I use a tool<br/>or answer directly?]
    
    GPT -->|"â‘£ Model responds"| Decision{ğŸ”€ Conditional Edge<br/>tools_condition}
    
    Decision -->|"â‘¤ Tool call detected<br/>weather_tool('Tokyo')"| ToolNode[ğŸ› ï¸ TOOLS NODE<br/>Execute Tool]
    
    Decision -->|"â‘ª No tool needed<br/>(Final answer ready)"| End([âœ… END<br/>Return Response])
    
    ToolNode -->|"â‘¥ Execute"| ToolExec[âš™ï¸ Tool Execution<br/>weather_tool runs<br/>Returns: 'Clear, 72Â°F']
    
    ToolExec -->|"â‘¦ Tool result"| ToolResult[ğŸ“„ Result Added to State<br/>ToolMessage with result]
    
    ToolResult -->|"â‘§ Back to agent"| Agent2[ğŸ¤– AGENT NODE<br/>Process tool result]
    
    Agent2 -->|"â‘¨ Invoke model<br/>with tool result"| GPT2[ğŸ’­ GPT-4 Formats Response<br/>'The weather in Tokyo<br/>is clear and 72Â°F']
    
    GPT2 -->|"â‘© Model responds"| Decision2{ğŸ”€ Conditional Edge<br/>Need more tools?}
    
    Decision2 -->|"If more tools needed"| ToolNode
    Decision2 -->|"â‘ª Final answer"| End
    
    style Start fill:#e1f5ff
    style End fill:#c8e6c9
    style Agent fill:#fff3e0
    style Agent2 fill:#fff3e0
    style ToolNode fill:#f3e5f5
    style Decision fill:#ffe0b2
    style Decision2 fill:#ffe0b2
    style StateInit fill:#e8eaf6
    style GPT fill:#fce4ec
    style GPT2 fill:#fce4ec